<div id="builderScreen" class="screen" style="display:none;">
            <div class="nav-bar">
                <button class="nav-btn" onclick="exitBuilder()">‚Üê Exit</button>
                <button class="nav-btn" style="background:#22c55e" onclick="saveOpening()">Save</button>
            </div>
            
            <div class="add-form">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                    <h3>Opening Metadata</h3>
                    <button class="icon-btn" onclick="downloadCurrentJSON()">üì•</button>
                </div>
                <input type="hidden" id="builderColor">
                
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" id="builderName">
                </div>
                <div class="form-group">
                    <label>Folder / Group</label>
                    <input type="text" id="builderGroup">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="builderDesc" rows="2" placeholder="Brief summary..."></textarea>
                </div>
            </div>

            <div style="margin-top:20px; padding-top:20px; border-top:1px solid #334155;">
                <div class="move-history" id="builderHistory" style="flex-wrap: wrap; height: auto;"></div>
                <div id="builderCurrentNode" class="current-move-card"></div>
                
                <div class="add-form" style="margin-top:20px;">
                    <h4 id="addFormTitle">Add Move</h4>
                    <div class="form-group">
                        <input type="text" id="newMoveInput" placeholder="Move (e.g. Nf3)">
                    </div>
                    <button class="nav-btn" style="width:100%; font-size:0.8rem; margin-bottom:10px;" onclick="toggleDetails()">‚ñº Add Details (Coach Mode)</button>
                    <div id="builderDetails" style="display:none;">
                        <div class="form-group">
                            <label>Status</label>
                            <select id="newStatus">
                                <option>Mainline</option><option>Sideline</option><option>Novelty</option><option>Blunder</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Type <span class="info-icon" onclick="toggleRefModal()">‚ìò</span></label>
                            <select id="newType">
                                <option>Positional/Strategic</option><option>Tactical</option><option>Dynamic</option><option>Defensive/Prophylactic</option><option>Forcing</option><option>Quiet</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Explanation</label>
                            <textarea id="newExpl" rows="3"></textarea>
                        </div>
                    </div>
                    <button class="nav-btn" style="width:100%; background:#3b82f6" onclick="addBuilderMove()">Add Move</button>
                    <button id="btnDeleteBranch" class="nav-btn" style="width:100%; background:#ef4444; margin-top:10px;" onclick="deleteBuilderNode()">Delete Branch</button>
                </div>
                
                <div style="margin-top:20px;">
                    <p class="section-title">Existing Responses:</p>
                    <div id="builderResponses"></div>
                </div>
            </div>
        </div>